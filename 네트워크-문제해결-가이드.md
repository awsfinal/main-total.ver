# 휴대폰-PC 백엔드 연결 문제 해결 가이드

## 🔥 윈도우 보안 설정이 문제인 경우

### 1. 방화벽 해결 (관리자 권한 필요)
```bash
# 관리자 권한으로 명령 프롬프트 실행 후:
윈도우-방화벽-해결.bat
```

### 2. 수동 방화벽 설정
1. **윈도우 키 + R** → `wf.msc` 입력
2. **인바운드 규칙** → **새 규칙**
3. **포트** → **TCP** → **특정 로컬 포트: 3001**
4. **연결 허용** → **모든 프로필** 체크 → 이름: "Node.js Backend"

### 3. PC IP 주소 확인
```bash
ipconfig
```
**무선 LAN 어댑터 Wi-Fi**의 **IPv4 주소**를 확인하세요.

### 4. 프론트엔드 코드 수정
확인한 IP 주소를 `possibleIPs` 배열 맨 앞에 추가:
```javascript
const possibleIPs = [
  '192.168.0.XXX',  // ← 여기에 실제 PC IP 입력
  '192.168.1.XXX',  // ← 또는 여기에
  // ... 나머지
];
```

## 🔧 백엔드 서버 개선사항

### 1. CORS 완전 허용
- 모든 도메인에서 접근 가능
- OPTIONS 요청 자동 처리

### 2. 네트워크 바인딩
- `0.0.0.0:3001`로 모든 네트워크 인터페이스에서 접근 허용
- 서버 시작 시 접근 가능한 IP 주소들 자동 출력

## 📱 테스트 방법

### 1. PC에서 백엔드 실행
```bash
cd C:\Users\DSO19\Desktop\maybe.main2\backend
node server.js
```

### 2. 휴대폰에서 브라우저로 테스트
```
http://PC의IP주소:3001/api/buildings
```
JSON 응답이 나오면 연결 성공!

### 3. 휴대폰에서 앱 테스트
- 사진 촬영 시 백엔드 콘솔에 GPS 로그가 나타나야 함

## ⚠️ 추가 확인사항

1. **같은 Wi-Fi 네트워크**: PC와 휴대폰이 같은 Wi-Fi에 연결되어 있는지 확인
2. **공유기 설정**: 일부 공유기는 기기 간 통신을 차단할 수 있음
3. **백신 프로그램**: 백신이 포트를 차단하고 있는지 확인
4. **윈도우 디펜더**: 실시간 보호가 차단하고 있는지 확인

## 🚀 최종 확인
백엔드 서버 실행 시 다음과 같은 로그가 나타나야 합니다:
```
📱 휴대폰에서 접근 가능한 IP 주소들:
   http://192.168.0.XXX:3001
   http://192.168.1.XXX:3001
```